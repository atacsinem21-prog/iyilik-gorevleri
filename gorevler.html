<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Görevler | İyilik Görevleri</title>
    <meta name="description" content="Kısa video, mini anket ve görevleri tamamlayın. Elde edilen gelirimizden bağış yapıyoruz." />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-slate-50 text-slate-900">
    <header class="border-b bg-white">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 py-4 flex items-center justify-between">
        <a href="/" class="font-semibold">İyilik Görevleri</a>
        <nav class="hidden sm:flex gap-6 text-sm">
          <a href="/gorevler.html" class="text-emerald-700">Görevler</a>
          <a href="/blog.html" class="hover:text-emerald-600">Blog</a>
          <a href="/bagis-defteri.html" class="hover:text-emerald-600">Bağış Defteri</a>
        </nav>
      </div>
    </header>

    <main class="mx-auto max-w-6xl px-4 sm:px-6 py-10">
      <h1 class="text-3xl font-bold">Görevler</h1>
      <p class="mt-3 text-slate-700 max-w-2xl">
        Bu sayfadaki görevler teşvikli ağlar/anket sağlayıcıları içindir. Platform bağış toplamaz; elde edilen gelirimizden bağış yaparız.
      </p>

      <div class="mt-8 grid lg:grid-cols-3 gap-6">
        <section class="lg:col-span-2 space-y-4">
          <div class="rounded-xl border bg-white p-4">
            <h2 class="font-semibold">TheoremReach Anket Duvarı</h2>
            <p class="text-sm text-slate-600 mb-3">Anketleri tamamlayarak ödül kazanın.</p>
            <div id="offerwall-root" class="min-h-[420px] rounded-lg bg-slate-100 flex items-center justify-center text-slate-500">
              <iframe 
                src="https://theoremreach.com/respondent_entry/direct?api_key=YOUR_API_KEY&user_id=YOUR_UNIQUE_USER_ID&transaction_id=YOUR_UNIQUE_TRANSACTION_ID"
                style="width:100%;height:600px;border:0;border-radius:12px;" 
                allow="clipboard-read; clipboard-write; fullscreen"
                title="TheoremReach Anket Duvarı">
              </iframe>
            </div>
          </div>

          <div class="grid sm:grid-cols-2 gap-4">
            <div class="p-4 rounded-xl border bg-white">
              <h3 class="font-semibold">Video İzle</h3>
              <p class="text-sm text-slate-600 mt-1">Kısa bir reklam videosu izleyin.</p>
              <button class="mt-3 px-4 py-2 rounded-md bg-emerald-600 text-white text-sm hover:bg-emerald-700" onclick="alert('Placeholder: Sağlayıcı kodu ile değişecek.')">Başlat</button>
            </div>
            <div class="p-4 rounded-xl border bg-white">
              <h3 class="font-semibold">Mini Anket</h3>
              <p class="text-sm text-slate-600 mt-1">1-2 dakikalık anket.</p>
              <button class="mt-3 px-4 py-2 rounded-md bg-emerald-600 text-white text-sm hover:bg-emerald-700" onclick="alert('Placeholder: Sağlayıcı kodu ile değişecek.')">Başlat</button>
            </div>
          </div>
        </section>

        <aside class="space-y-4">
          <div class="p-4 rounded-xl border bg-white">
            <h3 class="font-semibold">Kurallar</h3>
            <ul class="mt-2 list-disc pl-5 text-sm text-slate-700 space-y-1">
              <li>Zorunlu tıklama/izleme yoktur.</li>
              <li>Tek cihaz/tek hesap kullanın.</li>
              <li>Şüpheli kullanım engellenir.</li>
            </ul>
          </div>
          <div class="p-4 rounded-xl border bg-white">
            <h3 class="font-semibold">Sık Sorulan</h3>
            <p class="text-sm text-slate-700">"Bağış topluyor musunuz?" Hayır. Gelirimizden bağış yapıyoruz.</p>
          </div>
        </aside>
      </div>
    </main>

    <footer class="border-t bg-white">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 py-8 text-sm text-slate-600 flex items-center justify-between">
        <p>© <span id="y"></span> İyilik Görevleri</p>
        <a href="/aydinlatma.html" class="hover:text-emerald-700">Aydınlatma</a>
      </div>
    </footer>

    <!-- Cookie Onayı -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg p-4 z-50 hidden">
      <div class="mx-auto max-w-6xl flex flex-col sm:flex-row gap-3 items-center justify-between">
        <p class="text-sm text-slate-700">
          Site işlevleri için temel çerezler kullanılır. 
          <a href="/aydinlatma.html" class="text-emerald-600 underline">Detaylar</a>
        </p>
        <div class="flex gap-2">
          <button onclick="acceptCookies()" class="px-4 py-2 bg-emerald-600 text-white text-sm rounded-md hover:bg-emerald-700">
            Kabul Et
          </button>
          <button onclick="declineCookies()" class="px-4 py-2 border border-slate-300 text-slate-700 text-sm rounded-md hover:bg-slate-100">
            Reddet
          </button>
        </div>
      </div>
    </div>

    <script>
      // Yıl güncelleme
      document.getElementById('y').textContent = new Date().getFullYear();

      // Cookie yönetimi
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
      }

      function setCookie(name, value, days = 365) {
        const expires = new Date(Date.now() + days * 864e5).toUTCString();
        document.cookie = `${name}=${value}; expires=${expires}; path=/; SameSite=Lax`;
      }

      function acceptCookies() {
        setCookie('cookie_consent', 'accepted');
        document.getElementById('cookie-banner').classList.add('hidden');
        // Analytics başlat (Google Analytics, PostHog vb.)
        initAnalytics();
      }

      function declineCookies() {
        setCookie('cookie_consent', 'declined');
        document.getElementById('cookie-banner').classList.add('hidden');
      }

      // Cookie onayı kontrolü
      if (!getCookie('cookie_consent')) {
        document.getElementById('cookie-banner').classList.remove('hidden');
      } else if (getCookie('cookie_consent') === 'accepted') {
        initAnalytics();
      }

      // Analytics başlatma (Google Analytics örneği)
      function initAnalytics() {
        // Google Analytics 4 örneği - kendi ID'nizi ekleyin
        // gtag('config', 'GA_MEASUREMENT_ID');
        console.log('Analytics başlatıldı');
      }

      // TheoremReach iframe yükleme kontrolü
      function checkIframeLoad() {
        const iframe = document.querySelector('iframe');
        if (iframe) {
          iframe.onload = function() {
            console.log('TheoremReach iframe yüklendi');
          };
          iframe.onerror = function() {
            console.log('TheoremReach iframe yüklenemedi');
            document.getElementById('offerwall-root').innerHTML = 
              '<div class="text-center p-8"><p class="text-slate-500">Anket duvarı yüklenemedi. Lütfen daha sonra tekrar deneyin.</p></div>';
          };
        }
      }

      // Sayfa yüklendiğinde iframe kontrolü
      document.addEventListener('DOMContentLoaded', checkIframeLoad);
    </script>
  </body>
</html>